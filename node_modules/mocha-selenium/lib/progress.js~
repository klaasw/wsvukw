
module.exports = Progress;

function Progress(num, prefix) {
  this.prefix = prefix || 'progress: ';
  this.rl = require('readline').createInterface({
    input: process.stdin,
    output: process.stdout
  });
  this.rl.setPrompt('', 0);
  this.rl.clearLine = function() {
    this.write(null, {ctrl: true, name: 'u'});
  };
  this.num = num;
  this.done = 0;
}

Progress.prototype = {
  render: function () {
    var text = this.prefix;
    for (var i=0; i<this.done; i++) {
      text += '+';
    }
    for (var i=this.done; i<this.num; i++) {
      text += '-';
    }
    this.rl.clearLine();
    this.rl.write(text);
  }
};
